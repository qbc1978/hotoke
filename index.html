<!doctype html>
<html lang="ja">
<meta charset="utf-8">
<title>今日の占い</title>
<style>
  body { font-family: sans-serif; background: #111; color: #fff; text-align: center; padding: 2em; }
  img { max-width: 80%; height: auto; border-radius: 8px; margin-top: 1em; }
  .title { font-size: 2em; margin-top: 0.5em; }
  .desc { margin-top: 0.5em; font-size: 1.2em; }
</style>
<body>
<h1>今日の占い</h1>
<div id="loading">占い結果を取得中…</div>
<div id="result" style="display:none">
  <img id="resImg">
  <div class="title" id="resTitle"></div>
  <div class="desc" id="resDesc"></div>
</div>
<script>
  const API_BASE = "https://script.google.com/macros/s/AKfycbzo-yHnEJT-DXxhEKNNtrnuMV0TxtQmALI1QoWm9zQtH_pKOzeaXAXzHis3icPfApo/exec"; // 差し替え
  async function loadResult(){
    try {
      const res = await fetch(`${API_BASE}/draw`);
      const data = await res.json();
      if(data.ok){
        document.getElementById("resImg").src = data.imageUrl;
        document.getElementById("resTitle").textContent = data.name || "";
        document.getElementById("resDesc").textContent = data.result || "";
        document.getElementById("loading").style.display = "none";
        document.getElementById("result").style.display = "block";
      } else {
        document.getElementById("loading").textContent = "取得失敗: " + (data.error || "");
      }
    } catch(e){
      document.getElementById("loading").textContent = "エラー: " + e.message;
    }
  }
  loadResult();
</script>
</body>
</html>
